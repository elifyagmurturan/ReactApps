{"ast":null,"code":"import _slicedToArray from \"/Users/elifturan/Desktop/2021/CS/ReactApps/blog-with-simple-backend/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/elifturan/Desktop/2021/CS/ReactApps/blog-with-simple-backend/src/user/Login.js\";\nimport React, { useState, useContext, useEffect } from 'react';\nimport { StateContext } from '../contexts';\nimport { useResource, userResource } from 'react-request-hook';\nimport { useInput } from 'react-hookedup';\nexport default function Login() {\n  var _useContext = useContext(StateContext),\n      dispatch = _useContext.dispatch;\n\n  var _useInput = useInput(''),\n      username = _useInput.value,\n      bindUsername = _useInput.bindToInput;\n\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      loginFailed = _useState2[0],\n      setLoginFailed = _useState2[1];\n\n  var _useInput2 = useInput(''),\n      password = _useInput2.value,\n      bindPassword = _useInput2.bindToInput;\n\n  var _useResource = useResource(function (username, password) {\n    return {\n      url: \"/login/\".concat(encodeURI(username), \"/\").concat(encodeURI(password)),\n      method: 'get'\n    };\n  }),\n      _useResource2 = _slicedToArray(_useResource, 2),\n      user = _useResource2[0],\n      login = _useResource2[1];\n\n  useEffect(function () {\n    if (user && user.data) {\n      if (user.data.length > 0) {\n        setLoginFailed(false);\n        dispatch({\n          type: 'LOGIN',\n          username: user.data[0].username\n        });\n      } else {\n        setLoginFailed(true);\n      }\n    }\n\n    if (user && user.error) {\n      setLoginFailed(true);\n    }\n  }, [user]);\n  return React.createElement(\"form\", {\n    onSubmit: function onSubmit(e) {\n      e.preventDefault();\n      login(username, password);\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 33\n    },\n    __self: this\n  }, React.createElement(\"label\", {\n    htmlFor: \"login-username\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 34\n    },\n    __self: this\n  }, \"Username:\"), React.createElement(\"input\", Object.assign({\n    type: \"text\",\n    value: username\n  }, bindUsername, {\n    name: \"login-username\",\n    id: \"login-username\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 35\n    },\n    __self: this\n  })), React.createElement(\"label\", {\n    htmlFor: \"login-password\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 36\n    },\n    __self: this\n  }, \"Password:\"), React.createElement(\"input\", Object.assign({\n    type: \"password\",\n    value: password\n  }, bindPassword, {\n    name: \"login-password\",\n    id: \"login-password\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 37\n    },\n    __self: this\n  })), React.createElement(\"input\", {\n    type: \"submit\",\n    value: \"Login\",\n    disabled: username.length === 0,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 38\n    },\n    __self: this\n  }), loginFailed && React.createElement(\"span\", {\n    style: {\n      color: 'red'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 39\n    },\n    __self: this\n  }, \" Invalid username or password\"));\n}","map":{"version":3,"sources":["/Users/elifturan/Desktop/2021/CS/ReactApps/blog-with-simple-backend/src/user/Login.js"],"names":["React","useState","useContext","useEffect","StateContext","useResource","userResource","useInput","Login","dispatch","username","value","bindUsername","bindToInput","loginFailed","setLoginFailed","password","bindPassword","url","encodeURI","method","user","login","data","length","type","error","e","preventDefault","color"],"mappings":"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","sourcesContent":["import React, { useState, useContext, useEffect } from 'react'\nimport { StateContext } from '../contexts'\nimport {useResource, userResource} from 'react-request-hook'\nimport {useInput} from 'react-hookedup'\n\nexport default function Login () {\n  const { dispatch } = useContext(StateContext)\n  \n  const {value: username, bindToInput: bindUsername} = useInput('')\n  const [loginFailed, setLoginFailed] = useState(false)\n  const {value: password, bindToInput: bindPassword} = useInput('')\n\n  const[user, login] = useResource((username, password) => ({\n    url: `/login/${encodeURI(username)}/${encodeURI(password)}`,\n    method: 'get'\n  }))\n\n  useEffect(()=> {\n    if(user && user.data){\n      if(user.data.length>0){\n        setLoginFailed(false)\n        dispatch({type:'LOGIN', username: user.data[0].username})\n      } else{\n        setLoginFailed(true)\n      }\n    }\n    if(user && user.error){\n      setLoginFailed(true)\n    }\n  }, [user])\n\n  return (\n    <form onSubmit={e => { e.preventDefault(); login(username, password) }}>\n      <label htmlFor=\"login-username\">Username:</label>\n      <input type=\"text\" value={username} {...bindUsername} name=\"login-username\" id=\"login-username\" />\n      <label htmlFor=\"login-password\">Password:</label>\n      <input type=\"password\" value={password} {...bindPassword} name=\"login-password\" id=\"login-password\" />\n      <input type=\"submit\" value=\"Login\" disabled={username.length === 0} />\n      {loginFailed && <span style={{color: 'red'}}> Invalid username or password</span>}\n    </form>\n  )\n}\n"]},"metadata":{},"sourceType":"module"}